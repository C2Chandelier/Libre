{"ast":null,"code":"'use strict';\n\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _get from \"@babel/runtime/helpers/get\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nimport AnimatedValue from \"./AnimatedValue\";\nimport AnimatedWithChildren from \"./AnimatedWithChildren\";\nimport normalizeColor from '@react-native/normalize-color';\nimport NativeAnimatedHelper from \"../NativeAnimatedHelper\";\nvar NativeAnimatedAPI = NativeAnimatedHelper.API;\nvar defaultColor = {\n  r: 0,\n  g: 0,\n  b: 0,\n  a: 1.0\n};\nvar _uniqueId = 1;\nvar processColorObject = function processColorObject(color) {\n  return color;\n};\nfunction processColor(color) {\n  if (color === undefined || color === null) {\n    return null;\n  }\n  if (isRgbaValue(color)) {\n    return color;\n  }\n  var normalizedColor = normalizeColor(color);\n  if (normalizedColor === undefined || normalizedColor === null) {\n    return null;\n  }\n  if (typeof normalizedColor === 'object') {\n    var processedColorObj = processColorObject(normalizedColor);\n    if (processedColorObj != null) {\n      return processedColorObj;\n    }\n  } else if (typeof normalizedColor === 'number') {\n    var r = (normalizedColor & 0xff000000) >>> 24;\n    var g = (normalizedColor & 0x00ff0000) >>> 16;\n    var b = (normalizedColor & 0x0000ff00) >>> 8;\n    var a = (normalizedColor & 0x000000ff) / 255;\n    return {\n      r: r,\n      g: g,\n      b: b,\n      a: a\n    };\n  }\n  return null;\n}\nfunction isRgbaValue(value) {\n  return value && typeof value.r === 'number' && typeof value.g === 'number' && typeof value.b === 'number' && typeof value.a === 'number';\n}\nfunction isRgbaAnimatedValue(value) {\n  return value && value.r instanceof AnimatedValue && value.g instanceof AnimatedValue && value.b instanceof AnimatedValue && value.a instanceof AnimatedValue;\n}\nvar AnimatedColor = function (_AnimatedWithChildren) {\n  _inherits(AnimatedColor, _AnimatedWithChildren);\n  var _super = _createSuper(AnimatedColor);\n  function AnimatedColor(valueIn, config) {\n    var _this;\n    _classCallCheck(this, AnimatedColor);\n    _this = _super.call(this);\n    _this._listeners = {};\n    var value = valueIn !== null && valueIn !== void 0 ? valueIn : defaultColor;\n    if (isRgbaAnimatedValue(value)) {\n      var rgbaAnimatedValue = value;\n      _this.r = rgbaAnimatedValue.r;\n      _this.g = rgbaAnimatedValue.g;\n      _this.b = rgbaAnimatedValue.b;\n      _this.a = rgbaAnimatedValue.a;\n    } else {\n      var _processColor;\n      var processedColor = (_processColor = processColor(value)) !== null && _processColor !== void 0 ? _processColor : defaultColor;\n      var initColor = defaultColor;\n      if (isRgbaValue(processedColor)) {\n        initColor = processedColor;\n      } else {\n        _this.nativeColor = processedColor;\n      }\n      _this.r = new AnimatedValue(initColor.r);\n      _this.g = new AnimatedValue(initColor.g);\n      _this.b = new AnimatedValue(initColor.b);\n      _this.a = new AnimatedValue(initColor.a);\n    }\n    if (_this.nativeColor || config && config.useNativeDriver) {\n      _this.__makeNative();\n    }\n    return _this;\n  }\n  _createClass(AnimatedColor, [{\n    key: \"setValue\",\n    value: function setValue(value) {\n      var _processColor2;\n      var shouldUpdateNodeConfig = false;\n      if (this.__isNative) {\n        var nativeTag = this.__getNativeTag();\n        NativeAnimatedAPI.setWaitingForIdentifier(nativeTag.toString());\n      }\n      var processedColor = (_processColor2 = processColor(value)) !== null && _processColor2 !== void 0 ? _processColor2 : defaultColor;\n      if (isRgbaValue(processedColor)) {\n        var rgbaValue = processedColor;\n        this.r.setValue(rgbaValue.r);\n        this.g.setValue(rgbaValue.g);\n        this.b.setValue(rgbaValue.b);\n        this.a.setValue(rgbaValue.a);\n        if (this.nativeColor != null) {\n          this.nativeColor = null;\n          shouldUpdateNodeConfig = true;\n        }\n      } else {\n        var nativeColor = processedColor;\n        if (this.nativeColor !== nativeColor) {\n          this.nativeColor = nativeColor;\n          shouldUpdateNodeConfig = true;\n        }\n      }\n      if (this.__isNative) {\n        var _nativeTag = this.__getNativeTag();\n        if (shouldUpdateNodeConfig) {\n          NativeAnimatedAPI.updateAnimatedNodeConfig(_nativeTag, this.__getNativeConfig());\n        }\n        NativeAnimatedAPI.unsetWaitingForIdentifier(_nativeTag.toString());\n      }\n    }\n  }, {\n    key: \"setOffset\",\n    value: function setOffset(offset) {\n      this.r.setOffset(offset.r);\n      this.g.setOffset(offset.g);\n      this.b.setOffset(offset.b);\n      this.a.setOffset(offset.a);\n    }\n  }, {\n    key: \"flattenOffset\",\n    value: function flattenOffset() {\n      this.r.flattenOffset();\n      this.g.flattenOffset();\n      this.b.flattenOffset();\n      this.a.flattenOffset();\n    }\n  }, {\n    key: \"extractOffset\",\n    value: function extractOffset() {\n      this.r.extractOffset();\n      this.g.extractOffset();\n      this.b.extractOffset();\n      this.a.extractOffset();\n    }\n  }, {\n    key: \"addListener\",\n    value: function addListener(callback) {\n      var _this2 = this;\n      var id = String(_uniqueId++);\n      var jointCallback = function jointCallback(_ref) {\n        var number = _ref.value;\n        callback(_this2.__getValue());\n      };\n      this._listeners[id] = {\n        r: this.r.addListener(jointCallback),\n        g: this.g.addListener(jointCallback),\n        b: this.b.addListener(jointCallback),\n        a: this.a.addListener(jointCallback)\n      };\n      return id;\n    }\n  }, {\n    key: \"removeListener\",\n    value: function removeListener(id) {\n      this.r.removeListener(this._listeners[id].r);\n      this.g.removeListener(this._listeners[id].g);\n      this.b.removeListener(this._listeners[id].b);\n      this.a.removeListener(this._listeners[id].a);\n      delete this._listeners[id];\n    }\n  }, {\n    key: \"removeAllListeners\",\n    value: function removeAllListeners() {\n      this.r.removeAllListeners();\n      this.g.removeAllListeners();\n      this.b.removeAllListeners();\n      this.a.removeAllListeners();\n      this._listeners = {};\n    }\n  }, {\n    key: \"stopAnimation\",\n    value: function stopAnimation(callback) {\n      this.r.stopAnimation();\n      this.g.stopAnimation();\n      this.b.stopAnimation();\n      this.a.stopAnimation();\n      callback && callback(this.__getValue());\n    }\n  }, {\n    key: \"resetAnimation\",\n    value: function resetAnimation(callback) {\n      this.r.resetAnimation();\n      this.g.resetAnimation();\n      this.b.resetAnimation();\n      this.a.resetAnimation();\n      callback && callback(this.__getValue());\n    }\n  }, {\n    key: \"__getValue\",\n    value: function __getValue() {\n      if (this.nativeColor != null) {\n        return this.nativeColor;\n      } else {\n        return \"rgba(\" + this.r.__getValue() + \", \" + this.g.__getValue() + \", \" + this.b.__getValue() + \", \" + this.a.__getValue() + \")\";\n      }\n    }\n  }, {\n    key: \"__attach\",\n    value: function __attach() {\n      this.r.__addChild(this);\n      this.g.__addChild(this);\n      this.b.__addChild(this);\n      this.a.__addChild(this);\n      _get(_getPrototypeOf(AnimatedColor.prototype), \"__attach\", this).call(this);\n    }\n  }, {\n    key: \"__detach\",\n    value: function __detach() {\n      this.r.__removeChild(this);\n      this.g.__removeChild(this);\n      this.b.__removeChild(this);\n      this.a.__removeChild(this);\n      _get(_getPrototypeOf(AnimatedColor.prototype), \"__detach\", this).call(this);\n    }\n  }, {\n    key: \"__makeNative\",\n    value: function __makeNative(platformConfig) {\n      this.r.__makeNative(platformConfig);\n      this.g.__makeNative(platformConfig);\n      this.b.__makeNative(platformConfig);\n      this.a.__makeNative(platformConfig);\n      _get(_getPrototypeOf(AnimatedColor.prototype), \"__makeNative\", this).call(this, platformConfig);\n    }\n  }, {\n    key: \"__getNativeConfig\",\n    value: function __getNativeConfig() {\n      return {\n        type: 'color',\n        r: this.r.__getNativeTag(),\n        g: this.g.__getNativeTag(),\n        b: this.b.__getNativeTag(),\n        a: this.a.__getNativeTag(),\n        nativeColor: this.nativeColor\n      };\n    }\n  }]);\n  return AnimatedColor;\n}(AnimatedWithChildren);\nexport { AnimatedColor as default };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}