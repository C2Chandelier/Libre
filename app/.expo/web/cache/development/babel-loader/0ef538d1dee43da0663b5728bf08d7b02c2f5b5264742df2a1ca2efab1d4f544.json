{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport api from \"../../services/api\";\nimport React, { useState, useEffect } from \"react\";\nimport Navbar from \"../navbar\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { useNavigation } from \"@react-navigation/native\";\nimport { setUser } from \"../../redux/Auth/actions\";\nimport Toast from \"react-native-toast-message\";\nimport Logout from \"../auth/components/logout\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Sidebar from \"../sidebar\";\nimport Articles from \"../articles\";\nimport FindButton from \"./components/findButton\";\nimport { useTailwind } from \"tailwind-rn\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function Home() {\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    data = _useState2[0],\n    setData = _useState2[1];\n  var dispatch = useDispatch();\n  var user = useSelector(function (state) {\n    return state.Auth.user;\n  });\n  var navigation = useNavigation();\n  var tailwind = useTailwind();\n  var getMessage = function () {\n    var _ref = _asyncToGenerator(function* () {\n      try {\n        var response = yield api.get(`/user`, navigation);\n        setData(response);\n      } catch (e) {\n        Toast.show({\n          type: \"error\",\n          text1: `Oups, une erreur est survenue lors de la recuperation des messages`,\n          duration: 3000\n        });\n      }\n    });\n    return function getMessage() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n  var getUser = function () {\n    var _ref2 = _asyncToGenerator(function* () {\n      function fetchData() {\n        return _fetchData.apply(this, arguments);\n      }\n      function _fetchData() {\n        _fetchData = _asyncToGenerator(function* () {\n          try {\n            var res = yield api.checkToken();\n            if (!res.ok || !res.user) {\n              api.setToken(null);\n              dispatch(setUser(null));\n              return;\n            }\n            if (res.token) api.setToken(res.token);\n            if (res.user) dispatch(setUser(res.user));\n          } catch (e) {\n            console.log(e);\n          }\n        });\n        return _fetchData.apply(this, arguments);\n      }\n      fetchData();\n    });\n    return function getUser() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  useEffect(function () {\n    getMessage();\n    getUser();\n  }, []);\n  console.log(user);\n  console.log(data);\n  return _jsxs(View, {\n    style: tailwind(\"flex-1 flex-row\"),\n    children: [_jsx(View, {\n      style: tailwind(\"flex-1 absolute\"),\n      children: _jsx(Articles, {})\n    }), _jsx(FindButton, {\n      style: tailwind(\"absolute top-0 bottom-0\")\n    }), _jsx(Sidebar, {\n      style: tailwind(\"absolute bottom-[140px] right-0\")\n    }), _jsx(Logout, {}), _jsx(Navbar, {})]\n  });\n}","map":{"version":3,"names":["api","React","useState","useEffect","Navbar","useSelector","useDispatch","useNavigation","setUser","Toast","Logout","View","Sidebar","Articles","FindButton","useTailwind","jsx","_jsx","jsxs","_jsxs","Home","_useState","_useState2","_slicedToArray","data","setData","dispatch","user","state","Auth","navigation","tailwind","getMessage","_ref","_asyncToGenerator","response","get","e","show","type","text1","duration","apply","arguments","getUser","_ref2","fetchData","_fetchData","res","checkToken","ok","setToken","token","console","log","style","children"],"sources":["/Users/charlelie/projects/new/app/src/scenes/home/index.jsx"],"sourcesContent":["import api from \"../../services/api\";\nimport React, { useState, useEffect } from \"react\";\nimport Navbar from \"../navbar\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { useNavigation } from \"@react-navigation/native\";\nimport { setUser } from \"../../redux/Auth/actions\";\nimport Toast from \"react-native-toast-message\";\nimport Logout from \"../auth/components/logout\";\nimport { View } from \"react-native\";\nimport Sidebar from \"../sidebar\";\nimport Articles from \"../articles\";\nimport FindButton from \"./components/findButton\";\nimport { useTailwind } from \"tailwind-rn\";\n\nexport default function Home() {\n  const [data, setData] = useState([]);\n  const dispatch = useDispatch();\n  const user = useSelector((state) => state.Auth.user);\n  const navigation = useNavigation();\n  const tailwind = useTailwind();\n\n  const getMessage = async () => {\n    try {\n      const response = await api.get(`/user`, navigation);\n      setData(response);\n    } catch (e) {\n      Toast.show({\n        type: \"error\",\n        text1: `Oups, une erreur est survenue lors de la recuperation des messages`,\n        duration: 3000,\n      });\n    }\n  };\n\n  const getUser = async () => {\n    async function fetchData() {\n      try {\n        const res = await api.checkToken();\n        if (!res.ok || !res.user) {\n          api.setToken(null);\n          dispatch(setUser(null));\n          return;\n        }\n        if (res.token) api.setToken(res.token);\n        if (res.user) dispatch(setUser(res.user));\n      } catch (e) {\n        console.log(e);\n      }\n    }\n    fetchData();\n  };\n\n  useEffect(() => {\n    getMessage();\n    getUser();\n  }, []);\n  console.log(user);\n  console.log(data);\n\n  return (\n    <View style={tailwind(\"flex-1 flex-row\")}>\n      <View style={tailwind(\"flex-1 absolute\")}>\n        <Articles />\n      </View>\n      <FindButton style={tailwind(\"absolute top-0 bottom-0\")} />\n      <Sidebar style={tailwind(\"absolute bottom-[140px] right-0\")} />\n      <Logout />\n      <Navbar />\n    </View>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}