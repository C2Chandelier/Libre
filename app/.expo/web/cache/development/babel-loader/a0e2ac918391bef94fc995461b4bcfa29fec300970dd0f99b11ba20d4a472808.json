{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React from 'react';\nimport { useLogger } from \"./contexts\";\nimport { useTimeout } from \"./hooks\";\nimport { noop } from \"./utils/func\";\nimport { mergeIfDefined } from \"./utils/obj\";\nexport var DEFAULT_DATA = {\n  text1: undefined,\n  text2: undefined\n};\nexport var DEFAULT_OPTIONS = {\n  type: 'success',\n  position: 'top',\n  autoHide: true,\n  visibilityTime: 4000,\n  topOffset: 40,\n  bottomOffset: 40,\n  keyboardOffset: 10,\n  onShow: noop,\n  onHide: noop,\n  onPress: noop,\n  props: {}\n};\nexport function useToast(_ref) {\n  var defaultOptions = _ref.defaultOptions;\n  var _useLogger = useLogger(),\n    log = _useLogger.log;\n  var _React$useState = React.useState(false),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    isVisible = _React$useState2[0],\n    setIsVisible = _React$useState2[1];\n  var _React$useState3 = React.useState(DEFAULT_DATA),\n    _React$useState4 = _slicedToArray(_React$useState3, 2),\n    data = _React$useState4[0],\n    setData = _React$useState4[1];\n  var initialOptions = mergeIfDefined(DEFAULT_OPTIONS, defaultOptions);\n  var _React$useState5 = React.useState(initialOptions),\n    _React$useState6 = _slicedToArray(_React$useState5, 2),\n    options = _React$useState6[0],\n    setOptions = _React$useState6[1];\n  var onAutoHide = React.useCallback(function () {\n    log('Auto hiding');\n    setIsVisible(false);\n    options.onHide();\n  }, [log, options]);\n  var _useTimeout = useTimeout(onAutoHide, options.visibilityTime),\n    startTimer = _useTimeout.startTimer,\n    clearTimer = _useTimeout.clearTimer;\n  var hide = React.useCallback(function () {\n    log('Hiding');\n    setIsVisible(false);\n    clearTimer();\n    options.onHide();\n  }, [clearTimer, log, options]);\n  var show = React.useCallback(function (params) {\n    log(`Showing with params: ${JSON.stringify(params)}`);\n    var _params$text = params.text1,\n      text1 = _params$text === void 0 ? DEFAULT_DATA.text1 : _params$text,\n      _params$text2 = params.text2,\n      text2 = _params$text2 === void 0 ? DEFAULT_DATA.text2 : _params$text2,\n      _params$type = params.type,\n      type = _params$type === void 0 ? initialOptions.type : _params$type,\n      _params$position = params.position,\n      position = _params$position === void 0 ? initialOptions.position : _params$position,\n      _params$autoHide = params.autoHide,\n      autoHide = _params$autoHide === void 0 ? initialOptions.autoHide : _params$autoHide,\n      _params$visibilityTim = params.visibilityTime,\n      visibilityTime = _params$visibilityTim === void 0 ? initialOptions.visibilityTime : _params$visibilityTim,\n      _params$topOffset = params.topOffset,\n      topOffset = _params$topOffset === void 0 ? initialOptions.topOffset : _params$topOffset,\n      _params$bottomOffset = params.bottomOffset,\n      bottomOffset = _params$bottomOffset === void 0 ? initialOptions.bottomOffset : _params$bottomOffset,\n      _params$keyboardOffse = params.keyboardOffset,\n      keyboardOffset = _params$keyboardOffse === void 0 ? initialOptions.keyboardOffset : _params$keyboardOffse,\n      _params$onShow = params.onShow,\n      onShow = _params$onShow === void 0 ? initialOptions.onShow : _params$onShow,\n      _params$onHide = params.onHide,\n      onHide = _params$onHide === void 0 ? initialOptions.onHide : _params$onHide,\n      _params$onPress = params.onPress,\n      onPress = _params$onPress === void 0 ? initialOptions.onPress : _params$onPress,\n      _params$props = params.props,\n      props = _params$props === void 0 ? initialOptions.props : _params$props;\n    setData({\n      text1: text1,\n      text2: text2\n    });\n    setOptions(mergeIfDefined(initialOptions, {\n      type: type,\n      position: position,\n      autoHide: autoHide,\n      visibilityTime: visibilityTime,\n      topOffset: topOffset,\n      bottomOffset: bottomOffset,\n      keyboardOffset: keyboardOffset,\n      onShow: onShow,\n      onHide: onHide,\n      onPress: onPress,\n      props: props\n    }));\n    setIsVisible(true);\n    onShow();\n  }, [initialOptions, log]);\n  React.useEffect(function () {\n    var autoHide = options.autoHide;\n    if (isVisible) {\n      if (autoHide) {\n        startTimer();\n      } else {\n        clearTimer();\n      }\n    }\n  }, [isVisible, options, startTimer, clearTimer]);\n  return {\n    isVisible: isVisible,\n    data: data,\n    options: options,\n    show: show,\n    hide: hide\n  };\n}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}